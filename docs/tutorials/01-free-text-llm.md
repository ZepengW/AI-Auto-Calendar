# 案例 1：任意非结构化文本 → 大模型提取 → 上传到日历服务器

本教程演示如何把一段普通文字（会议邀请、活动公告、微信群通知等）交给解析节点（LLM/智能体）抽取为事件，并上传到已配置的日历服务器。

## 前提
- 已在“设置”中：
  - 配置至少一个“上传服务器”节点（`radicale` 或 `google`），并可选设为“默认服务器”。
  - 配置至少一个“解析节点”（`zhipu_agent` / `chatgpt_agent` / `bailian_agent`）。
  - 若界面顶部提示“缺少访问权限”，点击“申请所需站点权限”。

## 步骤
1. 打开解析页：点击扩展图标 → “解析文本/下载 ICS”，或新标签页访问 `parse.html`。
2. 粘贴待解析文本。例如：
   ```
   明天下午3点-5点在软件学院220会议室开AI项目评审会
   9月18日全天 外聘专家对接
   每周三 9:00-10:00 组会（连续四周）
   ```
3. 选择“解析节点”与“上传服务器”（或保持为默认）。
4. 点击“解析”。解析成功后，事件会以表格列出，可在表格内修订标题、时间、地点、描述。
5. 选择要上传的事件，点击“上传所选”。
   - 或点击“下载所选 ICS”，生成 `.ics` 文件本地保存。

## 可选设置
- JSON 模式：若你粘贴的就是 JSON，开启“JSON 模式”后将直接解析 `{events:[...]}` 或事件数组，跳过 LLM。
- Calendar 名称：在上传区域可填写“日历名称”；留空将使用服务器节点的 `defaultCalendarName`，否则回落为 `PAGE-PARSED`。

## 排障
- LLM 输出非严格 JSON 导致失败：重试或换用其它解析节点；复杂文本可先手动删减无关内容。
- 时间未能识别：插件支持多种时间格式；仍失败时，可在表格中改为 `YYYY-MM-DDTHH:mm` 再上传。
- 上传失败：
  - Radicale：检查 `base/username/auth` 与浏览器是否已授权该地址的可选 Host 权限。
  - Google：在“服务器节点”中完成授权，或重新授权；确认目标日历是否存在（插件可自动创建）。
